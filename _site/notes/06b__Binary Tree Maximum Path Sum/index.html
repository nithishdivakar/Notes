<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="ie=edge"><title>06b__Binary Tree Maximum Path Sum | Notes</title><meta name="description" content="while True: continue"><link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/favicon.ico" type="image/x-icon"><link href='/feed.xml' rel='alternate' type='application/atom+xml'><link rel="canonical" href="/notes/06b__Binary%20Tree%20Maximum%20Path%20Sum/"><link rel="stylesheet" href="/assets/style.css"><body><main> <!--<h2 class="title">Notes</h2>--><nav> <a href="http://localhost:4000">Notes</a> <a href="http://localhost:4000">Home</a> <!-- <a href="http://localhost:4000/assets/resume.pdf">Resume</a> <a href="http://localhost:4000dd">RRR</a> <a href="https://duckduckgo.com">[Search]</a> --></nav><!--<h1>06b__Binary Tree Maximum Path Sum</h1><i>Jan 01, 2024</i><h4 class="subtitle"></h4>--><h2 id="binary-tree-maximum-path-sum-lc124">Binary Tree Maximum Path Sum [LC#124]</h2><p>A path in a binary tree is a sequence of nodes where each pair of adjacent nodes in the sequence has an edge connecting them. A node can only appear in the sequence at most once. Note that the path does not need to pass through the root.</p><p>The path sum of a path is the sum of the node’s values in the path.</p><p>Given the root of a binary tree, return the maximum path sum of any non-empty path.</p><p><strong>Depth first traversal</strong></p><ul><li>The answer is inspired from from Kadane’s algorithm for max array sum<li>At every node, we are looking for what is max path sum of the path ending at the node and containing only the node’s children.<li>Once we have that for both children, we can also calculate the max path sum of the path passing through the node.<li>Keep track of the maximum of such path sum’s<li>$T(n) = O(n)$; $S(n) = O(h)$. recursion depth $\approx$ max height of the tree</ul><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">binary_tree_max_path_sum</span><span class="p">(</span><span class="n">root</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TreeNode</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="n">ans</span> <span class="o">=</span> <span class="nf">float</span><span class="p">(</span><span class="sh">'</span><span class="s">-inf</span><span class="sh">'</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">ending_with</span><span class="p">(</span><span class="n">node</span><span class="p">):</span>
        <span class="c1"># What is the max path sum with path ending at node
</span>        <span class="c1"># and the path contains only node's children?
</span>
        <span class="k">nonlocal</span> <span class="n">ans</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">node</span><span class="p">:</span> <span class="k">return</span> <span class="mi">0</span>

        <span class="n">left_gain</span> <span class="o">=</span> <span class="nf">max</span><span class="p">(</span><span class="nf">ending_with</span><span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">left</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">right_gain</span> <span class="o">=</span> <span class="nf">max</span><span class="p">(</span><span class="nf">ending_with</span><span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">right</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>

        <span class="n">node_gain</span> <span class="o">=</span> <span class="nf">max</span><span class="p">(</span><span class="n">left_gain</span><span class="p">,</span> <span class="n">left_gain</span><span class="p">)</span> <span class="o">+</span> <span class="n">node</span><span class="p">.</span><span class="n">val</span>

        <span class="c1"># max path sum of path passing through node
</span>        <span class="n">current_max</span> <span class="o">=</span> <span class="n">left_gain</span> <span class="o">+</span> <span class="n">node</span><span class="p">.</span><span class="n">val</span> <span class="o">+</span> <span class="n">right_gain</span>

        <span class="n">ans</span> <span class="o">=</span> <span class="nf">max</span><span class="p">(</span><span class="n">ans</span><span class="p">,</span> <span class="n">current_max</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">node_gain</span>

    <span class="nf">ending_with</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ans</span>
</code></pre></div></div></main><footer> <a href="/">← Back to all notes</a></footer><!-- <script type="text/x-mathjax-config"> MathJax.Hub.Config({ extensions: ["tex2jax.js", "TeX/AMSmath.js"], jax: ["input/TeX", "output/SVG"], }) </script> <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=default"> </script> -->
